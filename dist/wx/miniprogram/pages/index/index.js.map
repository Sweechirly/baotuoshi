{"version":3,"file":"pages/index/index.js","mappings":";;;;;;;;;AAAA,qBAAM;AACN,qBAAM;AACN,qBAAM;AACN,qBAAM;AACN,qBAAM;AACN;AACA,mBAAO,CAAC,GAAgR;AACxR;AACA,mBAAO,CAAC,GAA4P;AACpQ;AACA,mBAAO,CAAC,GAAkP;AAC1P;AACA,qBAAM;AACN,mBAAO,CAAC,GAA2L;;;;;;;;;;;ACb1J;AACzCA,uDAAU,CAAC;EACPC,MAAM,WAAAA,OAAA,EAAG;IACL;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAAA,CACH;EACDC,OAAO,WAAAA,QAAA,EAAG;IACN,IAAMC,KAAK,GAAGC,EAAE,CAACC,mBAAmB,CAAC,CAAC;IACtCF,KAAK,CACAG,MAAM,CAAC,WAAW,CAAC,CACnBC,MAAM,CAAC;MAAEC,IAAI,EAAE,IAAI;MAAEC,IAAI,EAAE;IAAK,CAAC,CAAC,CAClCC,IAAI,CAAC,UAACC,GAAG,EAAK;MACf,IAAMC,MAAM,GAAGD,GAAG,CAAC,CAAC,CAAC,CAACH,IAAI;MAC1B,IAAMK,GAAG,GAAGD,MAAM,CAACE,UAAU,CAAC,IAAI,CAAC;MACnCV,EAAE,CAACW,YAAY,CAAC;QACZC,GAAG,EAAE,2IAA2I;QAChJC,OAAO,EAAE,SAAAA,QAACN,GAAG,EAAK;UACdO,OAAO,CAACC,GAAG,CAACR,GAAG,CAAC;UAChB,IAAQS,KAAK,GAAmBT,GAAG,CAA3BS,KAAK;YAAEC,MAAM,GAAWV,GAAG,CAApBU,MAAM;YAAEC,IAAI,GAAKX,GAAG,CAAZW,IAAI;UAC3BV,MAAM,CAACQ,KAAK,GAAG,GAAG;UAClBR,MAAM,CAACS,MAAM,GAAI,GAAG,GAAGA,MAAM,GAAID,KAAK;UACtC;UACA;UACA;UACA;UACA;UACA,IAAMG,KAAK,GAAGX,MAAM,CAACY,WAAW,CAAC,CAAC;UAClC;UACAD,KAAK,CAACE,MAAM,GAAG,YAAM;YACjB;YACAZ,GAAG,CAACa,SAAS,CAACH,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;UAC9B,CAAC;UACD;UACAA,KAAK,CAACP,GAAG,GAAGM,IAAI;UAChB;QACJ;MACJ,CAAC,CAAC;MACF;MACA;MACA;MACA;MACA;MACA;IACJ,CAAC,CAAC;EACN,CAAC;;EACDK,OAAO,EAAE;IACLC,IAAI,WAAAA,KAAA,EAAG;MACH;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAAA;EAER;AACJ,CAAC,CAAC;;;;;;;ACtGF,qBAAM;AACN;AACA;AACA;AACA;AACA","sources":["webpack://baotuoshi/./src/miniprogram/pages/index/index.mpx","webpack://baotuoshi/./src/miniprogram/pages/index/index.ts","webpack://baotuoshi/./src/miniprogram/pages/index/index.mpx?eab5"],"sourcesContent":["global.currentModuleId = \"m321f15d9\"\nglobal.currentResource = \"/Users/xinxuetao/sensetime/study/baotuoshi/src/miniprogram/pages/index/index.mpx\"\nglobal.currentCtor = Component\nglobal.currentCtorType = \"component\"\nglobal.currentResourceType = \"page\"\n/* template */\nrequire(\"./index.mpx.wxml?isFirst&isPage!=!@mpxjs/webpack-plugin/lib/selector?mode=wx&env=!../../../../node_modules/windicss-webpack-plugin/dist/loaders/windicss-template.cjs!./index.mpx?extract&hasScoped&index=0&isFirst&isNative=false&isPage&moduleId=m321f15d9&mpx&type=template\")\n/* styles */\nrequire(\"./index.mpx.scss?isFirst&isPage!=!@mpxjs/webpack-plugin/lib/selector?mode=wx&env=!../../../../node_modules/windicss-webpack-plugin/dist/loaders/windicss-template.cjs!./index.mpx?extract&index=0&isFirst&isPage&moduleId=m321f15d9&mpx&scoped&type=styles\")\n/* json */\nrequire(\"./index.mpx.json?asScript&isFirst&isPage!=!@mpxjs/webpack-plugin/lib/selector?mode=wx&env=!../../../../node_modules/windicss-webpack-plugin/dist/loaders/windicss-template.cjs!./index.mpx?asScript&extract&index=0&isFirst&isPage&mpx&type=json\")\n/* script */\nglobal.currentSrcMode = \"wx\"\nrequire(\"./index.ts?ctorType=page&index=0&isFirst&isPage&lang=ts&mpx&resourcePath=%2FUsers%2Fxinxuetao%2Fsensetime%2Fstudy%2Fbaotuoshi%2Fsrc%2Fminiprogram%2Fpages%2Findex%2Findex.mpx&type=script\")\n","import { createPage } from '@mpxjs/core';\ncreatePage({\n    onLoad() {\n        //\n        // wx.downloadFile({\n        //   url: './bg.jpg',\n        //   success: (res) => {\n        //     console.log(res)\n        //     wx.showShareImageMenu({\n        //       path: res.tempFilePath\n        //     })\n        //   },\n        //   fail: (res) => {\n        //     console.log(res)\n        //   }\n        // })\n    },\n    onReady() {\n        const query = wx.createSelectorQuery();\n        query\n            .select('#myCanvas')\n            .fields({ node: true, size: true })\n            .exec((res) => {\n            const canvas = res[0].node;\n            const ctx = canvas.getContext('2d');\n            wx.getImageInfo({\n                src: 'https://wxmarketurl-1258344699.cos.ap-guangzhou.myqcloud.com/1254418846/o1sbG5XaCV4XqkKV67UGAXy4t57g/596d6bb0-1507-4cfa-98c1-75b1c83c8082',\n                success: (res) => {\n                    console.log(res);\n                    const { width, height, path } = res;\n                    canvas.width = 300;\n                    canvas.height = (300 * height) / width;\n                    // img.onload = (e) => {\n                    //   ctx.drawImage(img, 0, 0, 60, imgHeight 60);\n                    //   const imageData = ctx.getImageData(0, 0, 60, 60);\n                    // }\n                    // ctx.drawImage(path, 0, 0)\n                    const image = canvas.createImage();\n                    // 图片加载完成回调\n                    image.onload = () => {\n                        // 将图片绘制到 canvas 上\n                        ctx.drawImage(image, 0, 0);\n                    };\n                    // 设置图片src\n                    image.src = path;\n                    // })\n                }\n            });\n            // ctx.drawImage(res.tempFilePaths[0], 0, 0, 150, 100)\n            // const dpr = wx.getSystemInfoSync().pixelRatio\n            // canvas.width = res[0].width * dpr\n            // canvas.height = res[0].height * dpr\n            // ctx.scale(dpr, dpr)\n            // ctx.fillRect(0, 0, 100, 100)\n        });\n    },\n    methods: {\n        fuck() {\n            // wx.chooseMedia({\n            //   count: 9,\n            //   mediaType: ['image'],\n            //   sourceType: ['album', 'camera'],\n            //   sizeType: ['compressed']\n            // })\n            //   .then((res) => {\n            //     const str = wx\n            //       .getFileSystemManager()\n            //       .readFileSync(res.tempFiles[0].tempFilePath, 'base64')\n            //     console.log(str)\n            //     // @ts-ignore\n            //     return wx.serviceMarket.invokeService({\n            //       service: 'wx1d59f48128f45869',\n            //       api: 'segmentPortraitPic',\n            //       data: {\n            //         Action: 'SegmentPortraitPic',\n            //         Url: 'https://img2.baidu.com/it/u=2044335905,1934046471&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=750'\n            //       }\n            //     })\n            //   })\n            //   .then((res) => {\n            //     console.log('invokeService success', res)\n            //   })\n            //   .catch(console.log)\n            // @ts-ignore\n            // wx.serviceMarket\n            //   .invokeService({\n            //     service: 'wx2d1fd8562c42cebb',\n            //     api: 'segmentPortraitPic',\n            //     data: {\n            //       Action: 'SegmentPortraitPic',\n            //       Url: 'https://img.zcool.cn/community/01ba635c7aa5dea801203d2202fbea.jpg@2o.jpg'\n            //     }\n            //   })\n            //   .then((res) => {\n            //     console.log(res.data.ResultImageUrl)\n            //     console.log(res.data.ResultMaskUrl)\n            //   })\n            //   .catch((err) => {\n            //     console.error('invokeService fail', err)\n            //   })\n        }\n    }\n});\n","global.currentInject = {\n  moduleId: \"m321f15d9\",\n  render: function () {\n    this._r();\n  }\n};\n"],"names":["createPage","onLoad","onReady","query","wx","createSelectorQuery","select","fields","node","size","exec","res","canvas","ctx","getContext","getImageInfo","src","success","console","log","width","height","path","image","createImage","onload","drawImage","methods","fuck"],"sourceRoot":""}